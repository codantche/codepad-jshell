@startuml
skinparam classAttributeIconSize 0
hide methods

' ==== Feature nodes ====
class "Interactive Environment" as Root <<feature>>
class "Common features" as Common <<group>>
class "Evaluate expressions" as Eval <<mandatory>>
class "Method calls" as Calls <<mandatory>>
class "Variable declarations" as Vars <<mandatory>>

class "BlueJ Code Pad" as BJC <<feature>>
class "Visual object model" as VOM <<optional>>
class "Two-way integration" as TWI <<optional>>
class "Simplified diagnostics" as SD <<optional>>
class "Object inspector" as OI <<optional>>

class "JShell" as JSH <<feature>>
class "Command history" as Hist <<mandatory>>
class "Save/load snippets" as Save <<mandatory>>
class "Introspection (/vars, /types)" as Intro <<optional>>
class "IDE integration" as IDE <<optional>>

' ==== Tree (composition means “part-of” in feature tree) ====
Root *-- Common
Root *-- BJC
Root *-- JSH

Common *-- Eval
Common *-- Calls
Common *-- Vars

BJC *-- VOM
BJC *-- TWI
BJC *-- SD
BJC *-- OI

JSH *-- Hist
JSH *-- Save
JSH *-- Intro
JSH *-- IDE

' ==== Cross-tree constraints (requires/excludes) ====
OI ..> VOM : «requires»
TWI ..x IDE : «excludes»

' ==== Legend ====
legend right
  == Stereotypes ==
  <<feature>>  feature node
  <<group>>    grouping node
  <<mandatory>> mandatory feature
  <<optional>>  optional feature

  == Edges ==
  *--           composition (parent → subfeature)
  ..>           «requires»
  ..x           «excludes»
endlegend
@enduml
